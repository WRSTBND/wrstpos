{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./node_modules/@babel/runtime/helpers/interopRequireDefault.js","webpack:///./node_modules/react-native-keyevent/index.js","webpack:///./src/NativeExternalKeyCapture.tsx","webpack:///external \"react\"","webpack:///external \"react-native\""],"names":["_classCallCheck","instance","Constructor","TypeError","module","exports","__esModule","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","_interopRequireDefault","obj","KeyEvent","cb","removeKeyDownListener","Platform","OS","keyEvent","NativeEventEmitter","NativeModules","RNKeyEvent","listenerKeyDown","addListener","DeviceEventEmitter","remove","removeKeyUpListener","listenerKeyUp","removeKeyMultipleListener","listenerKeyMultiple"],"mappings":"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","file":"widgets/wrstbnd/nativeexternalkeycapture/NativeExternalKeyCapture.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/NativeExternalKeyCapture.tsx\");\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","import { DeviceEventEmitter, NativeEventEmitter, NativeModules, Platform } from 'react-native';\n\nclass KeyEvent {\n  onKeyDownListener(cb) {\n    this.removeKeyDownListener();\n    if (Platform.OS === \"ios\") {\n      let keyEvent = new NativeEventEmitter(NativeModules.RNKeyEvent);\n      this.listenerKeyDown = keyEvent.addListener('onKeyDown', cb);\n    } else {\n      this.listenerKeyDown = DeviceEventEmitter.addListener('onKeyDown', cb);\n    }\n  }\n\n  removeKeyDownListener() {\n    if (this.listenerKeyDown) {\n      this.listenerKeyDown.remove();\n      this.listenerKeyDown = null;\n    }\n  }\n\n  onKeyUpListener(cb) {\n    this.removeKeyUpListener();\n    if (Platform.OS === \"ios\") {\n      let keyEvent = new NativeEventEmitter(NativeModules.RNKeyEvent);\n      this.listenerKeyUp = keyEvent.addListener('onKeyUp', cb);\n    } else {\n      this.listenerKeyUp = DeviceEventEmitter.addListener('onKeyUp', cb);\n    }\n  }\n\n  removeKeyUpListener() {\n    if (this.listenerKeyUp) {\n      this.listenerKeyUp.remove();\n      this.listenerKeyUp = null;\n    }\n  }\n\n  onKeyMultipleListener(cb) {\n    this.removeKeyMultipleListener();\n    if (Platform.OS === \"ios\") {\n      let keyEvent = new NativeEventEmitter(NativeModules.RNKeyEvent);\n      this.listenerKeyMultiple = keyEvent.addListener('onKeyMultiple', cb);\n    } else {\n      this.listenerKeyMultiple = DeviceEventEmitter.addListener('onKeyMultiple', cb);\n    }\n  }\n\n  removeKeyMultipleListener() {\n    if (this.listenerKeyMultiple) {\n      this.listenerKeyMultiple.remove();\n      this.listenerKeyMultiple = null;\n    }\n  }\n}\n\nexport default new KeyEvent();\n","import { Component, ReactNode, createElement } from \"react\";\nimport { TextStyle, ViewStyle, TextInput, Text } from \"react-native\";\n\nimport { Style } from \"@mendix/pluggable-widgets-tools\";\n\nimport { NativeExternalKeyCaptureProps } from \"../typings/NativeExternalKeyCaptureProps\";\nimport KeyEvent from \"react-native-keyevent\";\n\nexport interface CustomStyle extends Style {\n    container: ViewStyle;\n    label: TextStyle;\n}\n\ninterface KeyCaptureState {\n    buffer: string;\n}\n\nexport class NativeExternalKeyCapture extends Component<NativeExternalKeyCaptureProps<CustomStyle>, KeyCaptureState> {\n    inputRef: TextInput | null = null;\n    constructor(props: NativeExternalKeyCaptureProps<CustomStyle>) {\n        super(props);\n        this.state = {\n            buffer: \"\"\n        };\n    }\n\n    componentDidMount(): void {\n        if (this.props.readMode === \"keyEvent\") {\n            KeyEvent.onKeyUpListener((keyEvent: any) => {\n                if (keyEvent.keyCode === 66) {\n                    this.executeAction(this.state.buffer);\n                    this.setState({ buffer: \"\" });\n                } else {\n                    this.setState(oldState => ({ buffer: oldState.buffer + keyEvent.pressedKey }));\n                }\n            });\n        }\n    }\n\n    componentWillUnmount(): void {\n        if (this.props.readMode === \"keyEvent\") {\n            KeyEvent.removeKeyUpListener();\n        }\n    }\n\n    executeAction = (code: string): void => {\n        this.props.attributeToSet.setValue(code);\n        if (this.props.onEnter?.canExecute && !this.props.onEnter.isExecuting) {\n            this.props.onEnter.execute();\n        }\n    };\n\n    handleEnterPressed = (event: any): void => {\n        this.executeAction(event.nativeEvent.text);\n        this.focusTextInput();\n    };\n\n    focusTextInput = (): void => {\n        if (this.inputRef) {\n            this.inputRef.focus();\n            this.inputRef.setNativeProps({ text: \"\" });\n        }\n    };\n\n    render(): ReactNode {\n        // return <View />;\n        return this.props.readMode === \"hiddenInput\" ? (\n            <TextInput\n                autoFocus\n                blurOnSubmit={false}\n                ref={input => (this.inputRef = input)}\n                onSubmitEditing={this.handleEnterPressed}\n                style={{ opacity: 0, height: 0 }}\n                onBlur={this.focusTextInput}\n            />\n        ) : (\n            <Text>Buffer: {this.state.buffer}</Text>\n        );\n    }\n}\n","module.exports = require(\"react\");","module.exports = require(\"react-native\");"],"sourceRoot":""}